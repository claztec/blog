---
layout: post
title: 2020-02-26 TIL
author: Derek Choi
comments: true
---

## 서버

### rabbitmq

큐를 써야지. 파이썬은 pika 와 함께..

pika  
[Introduction to Pika¶](https://pika.readthedocs.io/en/stable/){:target="_blank"}

기본 개념 이해하기  
[RabbitMQ 튜토리얼 요약 - bigboss.io](https://bigboss.io/2019/05/rabbitmq-tutorials-summary/){:target="_blank"}

[RabbitMQ 동작 이해하기 :: 조은우 개발 블로그 ](https://jonnung.dev/rabbitmq/2019/02/06/about-amqp-implementtation-of-rabbitmq/){:target="_blank"}

[\[RabbitMQ\] Retry Mechanism](https://velog.io/@minholee_93/RabbitMQ-Retry-Mechanism-nik4tel6hs){:target="_blank"}

[\[RabbitMQ\] Dead Letter Exchange & TTL(Time To Live)](https://velog.io/@minholee_93/RabbitMQ-Dead-Letter-Exchange-TTLTime-To-Live){:target="_blank"}

특정 시간 listener를 on/off 하는 방법. (스프링부트)  
[\[RabbitMQ\] Scheduling Consumer ON/OFF](https://velog.io/@minholee_93/RabbitMQ-Scheduling-Consumer-ykk4w7yzx3){:target="_blank"}

#### 개념
- Producer : 메시지 보냄
- Consumer : 메시지 받음
- Queue : 메시지 저장
- Exchange : 메시지 큐 분배
	- Fanout : 모든 큐에 브로드캐스팅
	- Direct : Routing Key 일치
	- Topick : Routing Key 패턴
	- Headers : Routing Key 대시 Header 확인



consumer가 다시 queue에 메시지를 넣을 수 는 없는가?? re-publish 란 용어인듯.
```
RabbitMQ의 메세지 보유기간은 acknowledge에 기반합니다. ack를 받은 메세지는 사라지게 됩니다. 따라서 처리를 완료한 메세지를 재 처리하고 싶을 경우에는 반드시 producer가 동일한 메세지를 re-publish 해야합니다.
```


consumer 가 메시지를 처리하는 것을 명시적으로 지정할 수 있는 것 같다. 위의 listener on/off 와 같은 맥락
파이썬 pika는 start_consuming() / stop_consuming()  
[BlockingConnection](https://pika.readthedocs.io/en/stable/modules/adapters/blocking.html#pika.adapters.blocking_connection.BlockingChannel.stop_consuming){:target="_blank"}
