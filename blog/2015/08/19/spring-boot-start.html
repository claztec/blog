<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>스프링 부트(Spring Boot) 시작하기</title>
    <meta content="claztec hacks" property="og:site_name">
    
    <meta content="스프링 부트(Spring Boot) 시작하기" property="og:title">
    
    
    <meta content="article" property="og:type">
    
    
    <meta content="http://localhost:4000/2015/08/19/spring-boot-start.html" property="og:url">
    

    <link rel="stylesheet" href="/assets/main.css">
    <link rel="canonical" href="http://localhost:4000/2015/08/19/spring-boot-start.html">
    <link rel="alternate" type="application/rss+xml" title="claztec hacks" href="/feed.xml">

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-527245-2"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-527245-2');
</script>

</head>

<body>

<header class="site-header" role="banner">

    <div class="wrapper">
        <div class="header-title">
            
            
            <a class="site-title" href="/">claztec hacks</a>
        </div>

        
        <nav class="site-nav">
            <input type="checkbox" id="nav-trigger" class="nav-trigger" />
            <label for="nav-trigger">
              <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                  <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                  <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                  <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
              </span>
            </label>
            <div class="trigger">
                
                
                
                
                
                
                <a class="page-link" href="/about/">
                    
                    <img class="site-profile" src="//s.gravatar.com/avatar/680de21d417dcf6d004b46c8cf93689d?s=35" alt="derek choi" />
                    
                </a>
                
                
                
                
                <a class="page-link" href="/archive.html">
                    
                    
                </a>
                
                
                
                
                
                
                
                
                
                
                <a class="page-link" href="/">
                    
                    
                </a>
                
                
                
                
                <a class="page-link" href="/page/2/">
                    
                    
                </a>
                
                
                
                
                <a class="page-link" href="/page/3/">
                    
                    
                </a>
                
                
                
                
                <a class="page-link" href="/page/4/">
                    
                    
                </a>
                
                
                
                
                <a class="page-link" href="/page/5/">
                    
                    
                </a>
                
                
                
                
                <a class="page-link" href="/page/6/">
                    
                    
                </a>
                
                
                
                
                
            </div>
        </nav>
        
    </div>
</header>

<main class="page-content" aria-label="Content">
    <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">스프링 부트(Spring Boot) 시작하기</h1>
        <p class="post-meta">
            <time datetime="2015-08-19T00:00:00+09:00" itemprop="datePublished">
                
                Aug 19, 2015
            </time>
            
            • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Derek Choi</span></span>
            </p>
    </header>

    <div class="post-content" itemprop="articleBody">
        <h1 id="스프링-부트-프로젝트-세팅">스프링 부트 프로젝트 세팅</h1>
<p>스프링에서도 python의 flask, django 나 ruby on rails 처럼 빠르게 웹 프로젝트를 만드는 스프링 부트(Spring Boot)기술이 등장하였다.<br />
나름 스프링 부트로 프로젝트를 구성하면서 정리한 내용이다.</p>

<h2 id="개발환경">개발환경</h2>
<ul>
  <li>java 8</li>
  <li>gradle 2.5</li>
  <li>intellij</li>
</ul>

<h2 id="intellij-에서-프로젝트-생성">intellij 에서 프로젝트 생성</h2>
<p>먼저 intellij에서 프로젝트를 생성한다.<br />
File - New - Project 에서 왼쪽 메뉴에 Gradle 선택
<img src="/assets/spring-boot-1.png" alt="setup 1" /></p>

<p>Groupid는 개발 조직에 대한 이름. 보통 uri를 거꾸로 한다.<br />
Artifact는 프로젝트를 나타내는 이름.
<img src="/assets/spring-boot-2.png" alt="setup 2" /></p>

<p>Create directories for empty content roots automatically 를 체크하면 기본으로 main과 test 디렉토리를 생성해준다.<br />
Use local gradle distribution 을 선택하면 Gradle home 에서 로컬에 설치한 gradle을 이용할 수 있다. (선택사항)<br />
Gradle JVM은 원하는 자바 버전이 설치된 경로 설정.
<img src="/assets/spring-boot-3.png" alt="setup 3" /></p>

<p>마지막으로 프로젝트가 생성될 디렉토리를 설정
<img src="/assets/spring-boot-4.png" alt="setup 4" /></p>

<h2 id="string-boot-기본-설정">String Boot 기본 설정</h2>
<h3 id="기본적으로-사용되는-파일-설정">기본적으로 사용되는 파일 설정</h3>
<h4 id="buildgradle">build.gradle</h4>
<p>프로젝트에 필요한 라이브러리를 추가하는 설정을 한다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>buildscript {
    repositories {
        maven {url 'http://repo.spring.io/libs-snapshot'}
    }
    dependencies {
        classpath ('org.springframework.boot:spring-boot-gradle-plugin:1.2.4.BUILD-SNAPSHOT')
    }
}

apply plugin: 'spring-boot'
apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'war'

war {
    baseName = 'docuconv'
    version = '0.1.0'
}

version = '1.0'

repositories {
//    mavenLocal()
    mavenCentral()
    jcenter()
    maven { url 'http://repo.spring.io/libs-snapshot' }
}

configurations {
    providedRuntime
}

dependencies {
    compile 'org.springframework.boot:spring-boot-starter-web:1.2.5.RELEASE'
    compile 'org.springframework.boot:spring-boot-starter-velocity:1.2.5.RELEASE'
    compile 'aspectj:aspectjrt:1.5.4'
    compile 'org.aspectj:aspectjweaver:1.8.5'
    compile 'org.slf4j:slf4j-api:1.7.12'
    compile 'ch.qos.logback:logback-classic:1.1.3'
    testCompile 'org.springframework.boot:spring-boot-starter-test:1.2.5.RELEASE'
    testCompile 'junit:junit:4.12'
}

test {
    testLogging {
        events 'started', 'passed'
    }

    onOutput { descriptor, event -&gt;
        logger.lifecycle(event.message)
    }
}
</code></pre></div></div>

<p>이후 View - Tool Windows - Gradle을 선택하고 gradle properties 에서 Refresh를 눌러줘야 참조하는 라이브러리를 받아오고, 설정이 변경된다.</p>

<h4 id="gitignore">.gitignore</h4>
<p>불필요한 파일은 git에 commit이 안되게 설정한다.<br />
https://www.gitignore.io 에서 몇번의 선택으로 쉽게 만들 수 있다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Created by https://www.gitignore.io

### Java ###
*.class

# Mobile Tools for Java (J2ME)
.mtj.tmp/

# Package Files #
*.jar
*.war
*.ear

# virtual machine crash logs, see http://www.java.com/en/download/help/error_hotspot.xml
hs_err_pid*


### Gradle ###
.gradle
build/

# Ignore Gradle GUI config
gradle-app.setting

# Avoid ignoring Gradle wrapper jar file (.jar files are usually ignored)
!gradle-wrapper.jar


### Intellij ###
# Covers JetBrains IDEs: IntelliJ, RubyMine, PhpStorm, AppCode, PyCharm

*.iml

## Directory-based project format:
.idea/
# if you remove the above rule, at least ignore the following:

# User-specific stuff:
# .idea/workspace.xml
# .idea/tasks.xml
# .idea/dictionaries

# Sensitive or high-churn files:
# .idea/dataSources.ids
# .idea/dataSources.xml
# .idea/sqlDataSources.xml
# .idea/dynamic.xml
# .idea/uiDesigner.xml

# Gradle:
# .idea/gradle.xml
# .idea/libraries

# Mongo Explorer plugin:
# .idea/mongoSettings.xml

## File-based project format:
*.ipr
*.iws

## Plugin-specific files:

# IntelliJ
/out/

# mpeltonen/sbt-idea plugin
.idea_modules/

# JIRA plugin
atlassian-ide-plugin.xml

# Crashlytics plugin (for Android Studio and IntelliJ)
com_crashlytics_export_strings.xml
crashlytics.properties
crashlytics-build.properties

</code></pre></div></div>

<h4 id="applicationproperties">application.properties</h4>
<p>레퍼런스 참조 해서 스프링 부트의 기본 설정을 해준다.<br />
<a href="http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#common-application-properties">http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#common-application-properties</a><br />
지금은 view 기술로 velocity를 build.gradle 에서 설정해서 velocity 설정만 하였다.</p>

<p>src/main/resources/application.properties</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spring.velocity.charSet=UTF-8
spring.velocity.properties.input.encoding=UTF-8
spring.velocity.output.encoding=UTF-8
</code></pre></div></div>

<h3 id="logbackxml-logback-testxml">logback.xml logback-test.xml</h3>
<p>로깅을 위해서 resources에 logback 설정을 한다.<br />
일단 둘다 같은 설정을 해둔다.</p>

<p>src/main/resources/logback.xml<br />
src/test/resources/logback-test.xml</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;configuration&gt;</span>
    <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"STDOUT"</span> <span class="na">class=</span><span class="s">"ch.qos.logback.core.ConsoleAppender"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;layout</span> <span class="na">class=</span><span class="s">"ch.qos.logback.classic.PatternLayout"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;Pattern&gt;</span>%d{HH:mm} %-5level %logger{36} - %msg%n<span class="nt">&lt;/Pattern&gt;</span>
        <span class="nt">&lt;/layout&gt;</span>
    <span class="nt">&lt;/appender&gt;</span>

    <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"net.daum.docuconv"</span> <span class="na">level=</span><span class="s">"DEBUG"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;root</span> <span class="na">level=</span><span class="s">"INFO"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"STDOUT"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/root&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div></div>

<h3 id="errorvm">error.vm</h3>
<p>스프링 부트에서 기본적으로 resources/templates 에 있는 view 파일을 참조한다. velocity 로 설정하였기 때문에 error.vm 이라는 더미 파일을 하나 만들어준다.<br />
이름은 상관없고, resources/templates 디렉토리를 만드는게 중요하다. 없으면 나중에 내장 서버를 구동할때 디렉토리가 없다는 에러가 발생한다.</p>

<p>src/main/resources/templates/error.vm</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ERROR !!!
</code></pre></div></div>

<h3 id="applicationconfig">ApplicationConfig</h3>
<p>junit을 이용한 유닛 테스트를 위해서 만든 클래스이다.<br />
@ComponentScan을 통해 지정한 패키지 부터 스프링 빈을 스캔한다. @EnableAutoConfiguration을 통해 스프링 부트에서 기본적으로 세팅된 설정을 불러온다.</p>

<p>스프링 부트에서는 보통 application.properties을 통해 datasource나 기타 자주 사용되는 설정을 정할 수 있는데,   junit으로 유닛 테스트할 경우 스프링 부트에서 자동으로 만들어주는 빈을 사용할때가 있다.
  이럴경우를 위해 선언해준다.</p>

<p>ArticleDaoImple에는 스프링부트 설정을 통해 선언된 JdbcTemplate 이 있고, 이를 테스트하기 위한 ArticleDaoTest 파일을 작성중이라면,</p>

<p><code class="highlighter-rouge">@ContextConfiguration(classes = {ApplicationConfig.class}, loader = SpringApplicationContextLoader.class)</code> 이런식으로 <code class="highlighter-rouge">@EnableAutoConfiguration</code> 을 선언한 파일을 설정한다.</p>

<p>ApplicationConfig.java</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="s">"net.daum.docuconv"</span><span class="o">)</span>
<span class="nd">@EnableAutoConfiguration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ApplicationConfig</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ArticleDaoTest.java</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RunWith</span><span class="o">(</span><span class="nc">SpringJUnit4ClassRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@ContextConfiguration</span><span class="o">(</span><span class="n">classes</span> <span class="o">=</span> <span class="o">{</span><span class="nc">ApplicationConfig</span><span class="o">.</span><span class="na">class</span><span class="o">},</span> <span class="n">loader</span> <span class="o">=</span> <span class="nc">SpringApplicationContextLoader</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ArticleDaoTest</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Logger</span> <span class="n">log</span> <span class="o">=</span> <span class="nc">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="nc">ArticleDaoTest</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">ArticleDao</span> <span class="n">articleDao</span><span class="o">;</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testAddArticle</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Article</span> <span class="n">article</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Article</span><span class="o">();</span>
        <span class="n">article</span><span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="s">"test"</span><span class="o">);</span>
        <span class="n">article</span><span class="o">.</span><span class="na">setContents</span><span class="o">(</span><span class="s">"content"</span><span class="o">);</span>
        <span class="nc">Article</span> <span class="n">insertedArticle</span> <span class="o">=</span> <span class="n">articleDao</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">article</span><span class="o">);</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">article</span><span class="o">.</span><span class="na">getTitle</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="n">insertedArticle</span><span class="o">.</span><span class="na">getTitle</span><span class="o">()));</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>ArticleDaoImp.java</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ArticleDaoImpl</span> <span class="kd">implements</span> <span class="nc">ArticleDao</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Article</span> <span class="nf">insert</span><span class="o">(</span><span class="nc">Article</span> <span class="n">article</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">KeyHolder</span> <span class="n">keyHolder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GeneratedKeyHolder</span><span class="o">();</span>
        <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="k">new</span> <span class="nc">PreparedStatementCreator</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="nc">PreparedStatement</span> <span class="nf">createPreparedStatement</span><span class="o">(</span><span class="nc">Connection</span> <span class="n">con</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">SQLException</span> <span class="o">{</span>
                <span class="nc">PreparedStatement</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">"insert into article (title, contents, regdttm) values (?, ?, now())"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]{</span><span class="s">"id"</span><span class="o">});</span>
                <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">article</span><span class="o">.</span><span class="na">getTitle</span><span class="o">());</span>
                <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">article</span><span class="o">.</span><span class="na">getContents</span><span class="o">());</span>
                <span class="k">return</span> <span class="n">ps</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">},</span> <span class="n">keyHolder</span><span class="o">);</span>
<span class="c1">//        jdbcTemplate.update("insert into article (title, contents, regdttm) values (?, ?, now())", new Object[]{article.getTitle(), article.getContents()});</span>
        <span class="n">article</span><span class="o">.</span><span class="na">setArticleId</span><span class="o">(</span><span class="n">keyHolder</span><span class="o">.</span><span class="na">getKey</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">article</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div></div>

<h3 id="application">Application</h3>
<p>스프링 부트에서 쉽게 내장 톰캣을 실행할때 사용한다.<br />
intellij에서 Application.java 파일에서 오른쪽 클릭 - Run ‘Application’ 를 누르면 바로 내장 톰캣이 구동한다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configurable</span>
<span class="nd">@EnableAutoConfiguration</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="s">"net.daum.docuconv"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Application</span> <span class="kd">extends</span> <span class="nc">SpringBootServletInitializer</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="nc">Application</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
    <span class="o">}</span>


    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="nc">SpringApplicationBuilder</span> <span class="nf">configure</span><span class="o">(</span><span class="nc">SpringApplicationBuilder</span> <span class="n">application</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">application</span><span class="o">.</span><span class="na">sources</span><span class="o">(</span><span class="n">applicationClass</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">Class</span><span class="o">&lt;</span><span class="nc">Application</span><span class="o">&gt;</span> <span class="n">applicationClass</span> <span class="o">=</span> <span class="nc">Application</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="hellocontroller-hellocontrollertest">HelloController, HelloControllerTest</h3>
<p>샘플 컨트롤러와 컨트롤러 테스트를 만든다.</p>

<p>HelloControllerTest.java</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RunWith</span><span class="o">(</span><span class="nc">SpringJUnit4ClassRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@SpringApplicationConfiguration</span><span class="o">(</span><span class="n">classes</span> <span class="o">=</span> <span class="nc">MockServletContext</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@WebAppConfiguration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloControllerTest</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">MockMvc</span> <span class="n">mvc</span><span class="o">;</span>

    <span class="nd">@Before</span><span class="o">()</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUp</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="n">mvc</span> <span class="o">=</span> <span class="nc">MockMvcBuilders</span><span class="o">.</span><span class="na">standaloneSetup</span><span class="o">(</span><span class="k">new</span> <span class="nc">HelloController</span><span class="o">()).</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">getHello</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="n">mvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="nc">MockMvcRequestBuilders</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/hello"</span><span class="o">).</span><span class="na">accept</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">TEXT_HTML</span><span class="o">))</span>
                <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isOk</span><span class="o">())</span>
                <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">content</span><span class="o">().</span><span class="na">string</span><span class="o">(</span><span class="n">equalTo</span><span class="o">(</span><span class="s">"hello"</span><span class="o">)));</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>HelloController.java</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloController</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Logger</span> <span class="n">log</span> <span class="o">=</span> <span class="nc">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="nc">HelloController</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"/hello"</span><span class="o">)</span>
    <span class="nd">@ResponseBody</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">helloToText</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"@@@@@ hello @@@@@"</span><span class="o">);</span>
        <span class="k">return</span> <span class="s">"hello"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"/hello.json"</span><span class="o">)</span>
    <span class="nd">@ResponseBody</span>
    <span class="kd">public</span> <span class="nc">Object</span> <span class="nf">helloToJson</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">model</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"time"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">());</span>
        <span class="n">model</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="s">"welcome"</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">title</span> <span class="o">=</span> <span class="s">"타이틀"</span><span class="o">;</span>
        <span class="n">model</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"title"</span><span class="o">,</span> <span class="n">title</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div></div>

<h2 id="실행">실행</h2>
<p>intellij에서 Application.java 에서 run 을 하거나 터미널에서 <code class="highlighter-rouge">gradle run</code> 을 하면 내장 서버가 구동되면서 어플리케이션이 실행된다.<br />
localhost:8080 으로 접속하면 확인할 수 있다.</p>

<p><img src="/assets/spring-boot-5.png" alt="run" /></p>

<h2 id="전체-프로젝트-구조">전체 프로젝트 구조</h2>
<p><img src="/assets/spring-boot-6.png" alt="project" /></p>

<h2 id="정리">정리</h2>
<ul>
  <li>intellij 에서 gradle을 사용해서 프로젝트를 만들려면 프로젝트에서 gradle을 선택해서 만든다.
    <ul>
      <li>중간에 Create directories for empty content roots automatically 는 꼭 체크해주자</li>
    </ul>
  </li>
  <li>build.gradle에서 각종 jar 설정을 해준다.
    <ul>
      <li>spring-boot-starter 로 시작하는 jar들이 있어서 편해졌다.</li>
      <li>설정이 바껴도 intellij 에서 자동으로 라이브러리를 다시 로딩하지 않으니 귀찮더라도 gradle 을 refrash 해줘야 한다.</li>
    </ul>
  </li>
  <li>application.properties 에서 설정만으로 귀찮은 작업들을 줄일 수 있다. 하지만 마법처럼 자동으로 되다보니, 다른 설정을 하게 되거나 사용하지 않으려면 꽤나 고생하게 된다.</li>
  <li>xml 설정은 최소화하고 대부분 bean 설정은 코드로 한다.</li>
  <li>spring boot 에서는 jar 명령으로 내장 서버를 띄울 수 있다. 확실히 서버 세팅하는 부분이 사라져 개발하기 편하다.</li>
  <li>실제 서비스에 적용하는건 jar로 내장 서버로 구동하거나, 기존처럼 설치된 서버에 war를 배포해서 구동할 수 있다.</li>
</ul>

<h2 id="참고할-수-있는-코드">참고할 수 있는 코드</h2>
<p>스프링 부트를 이용한 게시판 만들기
<a href="https://github.com/claztec/grboard">https://github.com/claztec/grboard</a></p>

    </div>
    
    
    
</article>
    </div>
    <div class="wrapper ads">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- dev-blog -->
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-0345179727475663"
         data-ad-slot="5976708518"
         data-ad-format="auto"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>
</main>

<footer class="site-footer">

    <div class="wrapper">

        <h2 class="footer-heading">claztec hacks</h2>

        <div class="footer-col-wrapper">
            <ul>
                <li><a href="/about">about</a></li>
                <li><a href="/archive">archive</a></li>
            </ul>

            <div class="footer-col footer-col-1">
                <ul class="contact-list">
                    <li>
                        
                        Derek Choi
                        
                    </li>
                    
                    <li><a href="mailto:claztec@gmail.com">claztec@gmail.com</a></li>
                    
                </ul>
            </div>

            <div class="footer-col footer-col-2">
                <ul class="social-media-list">
                    
                    <li>
                        <a href="https://github.com/claztec"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">claztec</span></a>

                    </li>
                    

                    
                    <li>
                        <a href="https://twitter.com/claztec"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">claztec</span></a>

                    </li>
                    
                </ul>
            </div>

            <div class="footer-col footer-col-3">
                <p>개발하면서 쓰는 이야기</p>
                <div>
                    <script>
                        (function() {
                            var cx = '009009887576837942462:xm5hm8vg_ko';
                            var gcse = document.createElement('script');
                            gcse.type = 'text/javascript';
                            gcse.async = true;
                            gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                                '//cse.google.com/cse.js?cx=' + cx;
                            var s = document.getElementsByTagName('script')[0];
                            s.parentNode.insertBefore(gcse, s);
                        })();
                    </script>
                    <gcse:searchbox-only></gcse:searchbox-only>
                </div>
            </div>
        </div>

    </div>

</footer>

<script id="dsq-count-scr" src="//claztec-hacks.disqus.com/count.js" async></script>

</body>

</html>